<!-- Import Tab -->
<div aria-labelledby="import-tab-btn"
     class="tab-pane fade show active h-100 d-flex flex-column"
     id="import-tab" role="tabpanel">

    <!-- Import Card -->
    <div class="card h-100 d-flex flex-column">
        <div class="card-header bg-success text-white">
            <h2 class="h5 mb-0">📥 Import BattleSnake Boards</h2>
        </div>

        <div class="card-body d-flex flex-column overflow-auto">

            <!-- Two Column Layout for Large Screens -->
            <div class="row flex-grow-1">
                <!-- Left Column: Board Input -->
                <div class="col-lg-8 d-flex flex-column">
                    <!-- Board Input -->
                    <div class="mb-3 flex-grow-1 d-flex flex-column">
                        <label for="boardInput" class="form-label fw-bold">Board Input:</label>
                        <textarea class="form-control flex-grow-1 font-monospace"
                                  id="boardInput"
                                  placeholder="Incolla qui le tue griglie...

                                        Esempio:
                                        👽 💲 💲 ⬛ ⬛
                                        💲 💲 💲 ⬛ ⬛
                                        💲 💲 ⬛ ⬛ ⬛
                                        ⬛ ⬛ 😈 ⛔ ⬛
                                        
                                        Dove:
                                        👽 = La mia testa
                                        💲 = Il mio corpo  
                                        😈 = Testa nemico
                                        ⛔ = Corpo nemico
                                        💀 = Pericolo
                                        ⬛ = Spazio vuoto"
                                  style="resize: none;"></textarea>
                    </div>

                    <!-- Control Buttons -->
                    <div class="d-flex gap-2 mb-3">
                        <button type="button" class="btn btn-success" id="importBtn" onclick="snake.importTabManager.importBoards()">
                            📥 Import
                        </button>
                        <button type="button" class="btn btn-secondary" id="clearBtn" onclick="snake.importTabManager.clearInput()">
                            🗑️ Clear
                        </button>
                        <button type="button" class="btn btn-info" id="exampleBtn" onclick="snake.importTabManager.loadExample()">
                            📋 Esempio
                        </button>
                    </div>

                    <!-- Input Stats -->
                    <div class="row g-2">
                        <div class="col-md-4">
                            <div class="bg-light p-2 rounded text-center">
                                <div class="small text-muted">Righe</div>
                                <div class="fw-bold" id="lineCount">0</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light p-2 rounded text-center">
                                <div class="small text-muted">Caratteri</div>
                                <div class="fw-bold" id="charCount">0</div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="bg-light p-2 rounded text-center">
                                <div class="small text-muted">Griglie Trovate</div>
                                <div class="fw-bold" id="gridCount">0</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Icon Reference -->
                <div class="col-lg-4">
                    <div class="card h-100">
                        <div class="card-header bg-light">
                            <h6 class="card-title mb-0">🎨 Caratteri di Gioco</h6>
                        </div>
                        <div class="card-body">
                            <p class="small text-muted mb-3">Clicca per copiare negli appunti:</p>

                            <div class="icons-grid mb-4">
                                <button class="icon-btn" data-icon="👽" title="My Head" onclick="snake.importTabManager.copyIcon('👽')">
                                    <div class="icon-emoji">👽</div>
                                    <div class="icon-label">My Head</div>
                                </button>

                                <button class="icon-btn" data-icon="💲" title="My Body" onclick="snake.importTabManager.copyIcon('💲')">
                                    <div class="icon-emoji">💲</div>
                                    <div class="icon-label">My Body</div>
                                </button>

                                <button class="icon-btn" data-icon="😈" title="Enemy Head" onclick="snake.importTabManager.copyIcon('😈')">
                                    <div class="icon-emoji">😈</div>
                                    <div class="icon-label">Enemy Head</div>
                                </button>

                                <button class="icon-btn" data-icon="⛔" title="Enemy Body" onclick="snake.importTabManager.copyIcon('⛔')">
                                    <div class="icon-emoji">⛔</div>
                                    <div class="icon-label">Enemy Body</div>
                                </button>

                                <button class="icon-btn" data-icon="💀" title="Hazard" onclick="snake.importTabManager.copyIcon('💀')">
                                    <div class="icon-emoji">💀</div>
                                    <div class="icon-label">Hazard</div>
                                </button>

                                <button class="icon-btn" data-icon="⬛" title="Empty Space" onclick="snake.importTabManager.copyIcon('⬛')">
                                    <div class="icon-emoji">⬛</div>
                                    <div class="icon-label">Empty</div>
                                </button>

                                <button class="icon-btn" data-icon="⬆️" title="Up Direction" onclick="snake.importTabManager.copyIcon('⬆️')">
                                    <div class="icon-emoji">⬆️</div>
                                    <div class="icon-label">Up</div>
                                </button>

                                <button class="icon-btn" data-icon="⬇️" title="Down Direction" onclick="snake.importTabManager.copyIcon('⬇️')">
                                    <div class="icon-emoji">⬇️</div>
                                    <div class="icon-label">Down</div>
                                </button>

                                <button class="icon-btn" data-icon="⬅️" title="Left Direction" onclick="snake.importTabManager.copyIcon('⬅️')">
                                    <div class="icon-emoji">⬅️</div>
                                    <div class="icon-label">Left</div>
                                </button>

                                <button class="icon-btn" data-icon="➡️" title="Right Direction" onclick="snake.importTabManager.copyIcon('➡️')">
                                    <div class="icon-emoji">➡️</div>
                                    <div class="icon-label">Right</div>
                                </button>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Load CSS and JS for this tab -->
<link rel="stylesheet" href="css/import-tab.css">
<script>
    if (window.snake !== undefined && window.snake.importTabManager === undefined) {
        window.snake.importTabManager = new ImportTabManager(window.snake.notifyService);
    }
</script>